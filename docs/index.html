<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noindex,nofollow" />
    <title>Unity Web Player | ChaseTag</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <link rel="stylesheet" href="TemplateData/sub.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <img
        src="TemplateData/gaora-logo.png"
        alt="GAORA SPORTS"
        width="110"
        height="39"
        decoding="async"
      />
    </header>
    <main>
      <div class="main-visual">
        <img
          src="TemplateData/main-visual-deco.png"
          alt=""
          class="main-visual-deco-image"
          decoding="async"
        />
        <div class="main-visual-game-iframe-container">
          <iframe
            id="game-iframe"
            src="game.html"
            frameborder="0"
            width="960"
            height="540"
            allowfullscreen
            class="main-visual-game-iframe"
            title="ChaseTag"
          ></iframe>
        </div>
        <p class="main-visual-game-description">
          移動：WASDキー スライディング：Fキー ジャンプ：Spaceキー
          カメラ移動：マウス
        </p>
        <button id="fullscreen-button" class="main-visual-fullscreen-button">
          <img
            src="TemplateData/fullscreen-icon.png"
            alt=""
            width="55"
            height="55"
          />全画面表示でプレイ
        </button>
      </div>
      <div class="main-visual-red-triangles"></div>
      <section class="content">
        <div>
          <div class="content-container">
            <img
              src="TemplateData/content-container.png"
              alt=""
              width="1440"
              height="1026"
              class="content-container-image"
            />
            <div class="content-box">
              <h1 class="content-title">
                <img
                  src="TemplateData/content-title.png"
                  alt="チェイスタグとは"
                />
              </h1>
              <h2 class="content-message">
                障害物だらけの専用コートで行う、20秒勝負の“本気”の1対1鬼ごっこ競技。
              </h2>
              <div class="content-bottom">
                <img
                  src="TemplateData/content-image.png"
                  alt=""
                  class="content-image"
                />
                <dl class="content-descriptions">
                  <div>
                    <dt class="content-description-title">フィールド</dt>
                    <dd>
                      <ul class="content-description-detail-list">
                        <li>8m×8m の「クアッド」と呼ばれる障害物コート</li>
                      </ul>
                    </dd>
                  </div>
                  <div>
                    <dt class="content-description-title">
                      ルール (シングルサドンデスチェイスオフ)
                    </dt>
                    <dd>
                      <ul class="content-description-detail-list">
                        <li>
                          鬼<span
                            class="content-description-detail-list-small-text"
                          >
                            (チェイサーという)</span
                          >
                          と子
                          <span
                            class="content-description-detail-list-small-text"
                            >(イヴェイダーという) </span
                          >の1対1
                        </li>
                        <li>20秒の間、2人がクアッド内で鬼ごっこ</li>
                        <li>タッチ(タグという)されたら、鬼と子を入れ替え</li>
                        <li>逃げ切った秒数の多い方が勝ち</li>
                      </ul>
                    </dd>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <img
        src="./TemplateData/copyright.png"
        alt="©COPYRIGHT GAORA INC."
        class="copy-right"
      />
    </footer>
    <script>
      const fullscreenButton = document.getElementById("fullscreen-button");
      const gameIframe = document.getElementById("game-iframe");

      // iframeにフォーカスを当てる共通関数
      const focusIframe = () => {
        setTimeout(() => {
          gameIframe.focus();
          try {
            if (gameIframe.contentWindow) {
              gameIframe.contentWindow.focus();
            }
          } catch (e) {
            // クロスオリジンの場合はエラーになるが、無視
          }
        }, 100);
      };

      // 全画面表示をリクエストする共通関数
      const requestFullscreen = async (element) => {
        if (element.requestFullscreen) {
          return await element.requestFullscreen();
        } else if (element.webkitRequestFullscreen) {
          return await element.webkitRequestFullscreen();
        } else if (element.mozRequestFullScreen) {
          return await element.mozRequestFullScreen();
        } else if (element.msRequestFullscreen) {
          return await element.msRequestFullscreen();
        }
      };

      // 現在の全画面要素を取得する共通関数
      const getFullscreenElement = () => {
        return (
          document.fullscreenElement ||
          document.webkitFullscreenElement ||
          document.mozFullScreenElement ||
          document.msFullscreenElement
        );
      };

      // 全画面表示ボタンのイベントリスナー
      fullscreenButton.addEventListener("click", async () => {
        try {
          await requestFullscreen(gameIframe);
          focusIframe();
        } catch (error) {
          console.error("全画面表示に失敗しました:", error);
        }
      });

      // 全画面変更イベントの共通ハンドラー
      const handleFullscreenChange = () => {
        if (getFullscreenElement() === gameIframe) {
          focusIframe();
        }
      };

      // 各ブラウザ用の全画面変更イベントリスナー
      document.addEventListener("fullscreenchange", handleFullscreenChange);
      document.addEventListener(
        "webkitfullscreenchange",
        handleFullscreenChange
      );
      document.addEventListener("mozfullscreenchange", handleFullscreenChange);
      document.addEventListener("MSFullscreenChange", handleFullscreenChange);
    </script>
  </body>
</html>
